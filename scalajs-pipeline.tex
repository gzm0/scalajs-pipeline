\documentclass{beamer}

\usepackage[utf8]{inputenc}

%\usepackage{alltt}
%\usepackage{xcolor}
%\usepackage[overlay,absolute]{textpos}
%\usepackage[normalem]{ulem}

\usepackage{tikz}
\usetikzlibrary{arrows,petri,topaths}
\usepackage{tkz-berge}

%%%% Colors for source highlighting
%%\definecolor{scKW}  {HTML}{AA37F2}
%%\definecolor{scFct} {HTML}{1010FF}
%%\definecolor{scType}{HTML}{228B22}
%%\definecolor{scVar} {HTML}{A45936}
%%\definecolor{scComm}{HTML}{B32525}
%%
%%%% Define _s_cala commands
%%\newcommand{\sK}[1]{{\color{scKW} #1}}
%%\newcommand{\sF}[1]{{\color{scFct} #1}}
%%\newcommand{\sV}[1]{{\color{scVar} #1}}
%%\newcommand{\sT}[1]{{\color{scType} #1}}
%%\newcommand{\sC}[1]{{\color{scComm} #1}}
%%\newcommand{\sH}[1]{{\color{white} #1}}
%%\newcommand{\sN}[1]{{\color{black} #1}}
%%\newcommand{\sS}{\vspace{0.8mm}}

%% Define other commands
%%\newcommand<>{\strike}[1]{\alt#2{\sout{#1}}{#1}}

%%% File icons
\newcommand{\scalaFile}{\includegraphics{icons/files/scala}}
\newcommand{\scalaFiles}[1][1]{\includegraphics[scale=#1]{icons/files/scala_}}
\newcommand{\jsFile}[1][1]{\includegraphics[scale=#1]{icons/files/js}}
\newcommand{\classFiles}{\includegraphics{icons/files/class_}}
\newcommand{\sjsirFiles}{\includegraphics{icons/files/sjsir_}}

\newcommand{\packageIcon}{\includegraphics{icons/files/package}}

%%% Component icons
\newcommand{\scalajsc}{\includegraphics{icons/components/scalajsc}}
\newcommand{\scalajsld}[1][1]{\includegraphics[scale=#1]{icons/components/scalajsld}}
\newcommand{\scalac}{\includegraphics{icons/components/scalac}}
\newcommand{\javaVM}{\includegraphics{icons/components/jvm}}

\setbeamercovered{transparent}
\setbeamertemplate{navigation symbols}

% Frame number on page
\setbeamertemplate{footline}{\makebox[0.98\paperwidth][r]{\large \raisebox{1.2ex}{\insertframenumber}}}

\newcommand{\emptyFile}{\includegraphics[width=1.5cm]{empty-icon}}

\title{The Scala.js Compilation Pipeline}
\author{Tobias Schlatter}
\date{August 15, 2015}

\begin{document}

\begin{frame}
  \begin{center}
    \visible<2>{\Large The Scala.js Compilation Pipeline}
    
    \vspace{1cm}

    \begin{tikzpicture}
      \node (scala) at (0,0) {\scalaFiles[1.2]};
      \node (js) at (8,0) {\jsFile[1.2]};
      \node (scalajs) at (4,0) {\scalajsld[1.5]};

      \draw[->,thick] (scala) -- (scalajs);
      \draw[->,thick] (scalajs) -- (js);
    \end{tikzpicture}

    \vspace{1cm}

    \visible<2>{\Large Tobias Schlatter -- \texttt{@gzm0}}
  \end{center}
\end{frame}

\section*{Overview}

\begin{frame}
  \frametitle{Contents}

  \tableofcontents
\end{frame}

\section{A View From Above}
\subsection{Scala JVM Pipeline}

\begin{frame}
  \frametitle{Scala JVM Pipeline}
  
  \begin{center}
    \begin{tikzpicture}
      \useasboundingbox (0,-1) rectangle (10,5);

      % Top pipeline
      \node (scala1) at (0,4) {\scalaFiles};
      \node (scalac1) at (2.5,4) {\scalac};
      \node (class1) at (5.5,4) {\classFiles};
      \node<2-> at (5,4.6) {\packageIcon};

      \draw[->,thick] (scala1) -- (scalac1);
      \draw[->,thick] (scalac1) -- (class1);

      % Bottom pipeline
      \node<3-> (scala2) at (0,0) {\scalaFiles};
      \node<3-> (scalac2) at (2.5,0) {\scalac};
      \node<3-> (class2) at (5.5,0) {\classFiles};
      \node<3-> at (5, .6) {\packageIcon};

      \draw<3->[->,thick] (scala2) -- (scalac2);
      \draw<3->[->,thick] (scalac2) -- (class2);

      % JVM and inputs
      \node (jvm) at (9,2) {\javaVM};

      \draw[->,thick] (class1) -- (jvm);
      \draw<3->[->,thick] (class2) -- (jvm);

      % Compilation symbols
      \draw<4->[->,thick] (class1) -- (scalac2);
    \end{tikzpicture}
  \end{center}
\end{frame}

\subsection{Scala.js Pipeline}
\begin{frame}
  \frametitle{Scala.js Pipeline}
  
  \begin{center}
    \begin{tikzpicture}
      \useasboundingbox (0,-1) rectangle (10,5);
      
      % Top pipeline
      \node (scala1) at (0,4) {\scalaFiles};
      \node (scalajsc1) at (2.5,4) {\scalajsc};
      \node<1> (sjsir1) at (5.5,4) {\sjsirFiles};
      \node<2-> (sjsir1) at (5.5,4.7) {\sjsirFiles};
      \node<2-> (class1) at (5.5,3.3) {\classFiles};
      \node<4-> at (5,4) {\packageIcon};

      \draw[->,thick] (scala1) -- (scalajsc1);
      \draw[->,thick] (scalajsc1) -- (class1);
      \draw[->,thick] (scalajsc1) -- (sjsir1);

      % Bottom pipeline
      \node (scala2) at (0,0) {\scalaFiles};
      \node (scalajsc2) at (2.5,0) {\scalajsc};
      \node<1> (sjsir2) at (5.5,0) {\sjsirFiles};
      \node<2-> (sjsir2) at (5.5,.7) {\sjsirFiles};
      \node<2-> (class2) at (5.5,-.7) {\classFiles};
      \node<4-> at (5,0) {\packageIcon};

      \draw[->,thick] (scala2) -- (scalajsc2);
      \draw[->,thick] (scalajsc2) -- (class2);
      \draw[->,thick] (scalajsc2) -- (sjsir2);

      % Linker and JS file
      \node (scalajsld) at (9,3.5) {\scalajsld};
      \node (js) at (9,0) {\jsFile};

      \draw[->,thick] (sjsir1) -- (scalajsld);
      \draw[->,thick] (sjsir2) -- (scalajsld);

      \draw[->,thick] (scalajsld) -- (js);

      % Compilation symbols
      \draw<3->[->,thick] (class1) -- (scalajsc2);
    \end{tikzpicture}
  \end{center}
\end{frame}

\section{Scala.js IR}

\begin{frame}
\end{frame}

\section{Scala.js Compiler}

\begin{frame}
\end{frame}

\section{Scala.js Linker}

\begin{frame}
\end{frame}

\end{document}